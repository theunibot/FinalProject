<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>UniBot debug commands</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type='text/javascript' src='edge_includes/jquery-2.0.3.min.js'></script>
        <script type='text/javascript'>

        var calCabinet = "";
        var calShelf = "";
        var calDepth = "1";
        var calSpeed = "300";
        function setCalibrate(cabinet, shelf, depth, speed) {
            if (cabinet == null)
                cabinet = prompt("Cabinet to calibrate (D1, D2, CPL, CPM, CPR)?", calCabinet);
            if (shelf == -1)
                shelf = prompt("Shelf to calibrate (00-34)?", calShelf);
            if (depth == -1)
                depth = prompt("Depth of plunge (1 for desktop; 1 (bottom) or 2 (top) disc in CP)?", calDepth);
            if (speed == -1)
                speed = prompt("Speed to run arm at during calibration?", calSpeed);
            calCabinet = cabinet;
            calShelf = shelf;
            calDepth = depth;
            calSpeed = speed;
        }
        function r12CalPosition(plunge) {
            cmd = "ENQUEUE?queue=0&status=0&command=POSITION-CALIBRATE&option=move&cabinet=" + calCabinet +
                    "&shelf=" + calShelf + "&plunge=" + plunge + "&depth=" + calDepth + "&speed=" + calSpeed;
            r12(cmd);
        }
        function r12CalAdjust(axis, distance) {
            if (axis == null)
                axis = prompt("Which axis to adjust (x, y, z, pitch, yaw, roll)?");
            if (distance == -1)
                distance = prompt("Move amount (positive or negative, mm or degrees)?");
            cmd = "ENQUEUE?queue=0&status=0&command=POSITION-CALIBRATE&option=" + axis + "&value=" + distance;
            r12(cmd);
        }
        function r12reload() {
                name = prompt('Reload filter (empty is all; examples are CPL0, CPR23, D1_2, CPL_D1)?');
                cmd = 'ENQUEUE?queue=0&status=0&command=PROGRAM-CONTROLLER&name=' + name;
                r12(cmd);
            }
            function r12move() {
                cabinet = prompt('Which cabinet (CPL, CPM, CPR, D1, or D2)?');
                shelf = prompt('Which shelf?');
                cmd = 'ENQUEUE?queue=0&status=0&command=POSITION&cabinet=' + cabinet + '&shelf=' + shelf;
                r12(cmd);
            }
            function r12adjust(cmd) {
                amount = prompt('Amount to adjust ' + cmd + ' in mm?');
                r12debug('debug=' + cmd + '&value=' + amount);
            }
            function r12mount(desktop, layer, shelf) {
                if (layer == -1)
                    layer = prompt('CachePoint layer (00-34)?');
                if (desktop == -1)
                    desktop = prompt('Desktop (1 or 2)?');
                if (shelf == -1)
                    shelf = prompt('Desktop shelf (0-5)?');
                cmd = 'ENQUEUE?status=0&command=MOUNT-LAYER&queue=' + desktop + '&desktop=' + desktop + 
                    '&layer=' + layer + '&shelf=' + shelf + '&effect=efficient';
                r12(cmd);
            }
            function r12debug(cmd) {
                r12('DEBUG?' + cmd);
            }
            function r12(str) {
                $.getJSON('/unibot/' + str);
            }
        </script>
        <style>
            .header {
                font-size: larger;
                font-weight: bold;
                padding-top: 5px;
                padding-bottom: 15px;
            }
            .commands div {
                padding-bottom: 8px;
                padding-left: 10px;

            }
            .commands a {
                text-decoration: underline;
            }
        </style>
    </head>
    <body>
        <div class="section">
            <div class="header">DEBUGGER MAIN</div>
            <div class='commands'>
                <div><a onclick="r12debug('debug=on')">Debug ON</a></div>
                <div><a onclick="r12debug('debug=off')">Debug OFF</a></div>
                <div><a onclick="r12debug('debug=step')">Debug STEP</a></div>
            </div>
        </div>
        <div class="section">
            <div class="header">DEBUGGER OPTIONS</div>
            <div class='commands'>        
                <div><a onclick="r12debug('debug=speed&speed=30000')">Debug SPEED 30K</a></div>
                <div><a onclick="r12debug('debug=speed&speed=2000')">Debug SPEED 2K</a></div>
                <div><a onclick="r12debug('debug=speed&speed=500')">Debug SPEED 500</a></div>
                <div><a onclick="r12debug('debug=speed&speed=200')">Debug SPEED 200</a></div>
                <div><a onclick="r12debug('debug=skip')">Debug SKIP</a></div>
                <div><a onclick="r12debug('debug=fail')">Debug FAIL</a></div>
            </div>
        </div>
        <div class="section">
            <div class="header">POSITION CALIBRATION</div>
            <div class="commands">
                <div><a onclick="setCalibrate('D1', -1, 1, -1)">Calibrate D1</a></div>
                <div><a onclick="setCalibrate('D1', -1, 1, -1)">Calibrate D2</a></div>
                <div><a onclick="setCalibrate('D1', -1, 1, -1)">Calibrate CPL</a></div>
                <div><a onclick="setCalibrate('D1', -1, 1, -1)">Calibrate CPM</a></div>
                <div><a onclick="setCalibrate('D1', -1, 1, -1)">Calibrate CPR</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=ARM-GRIP&grip=o');">Ungrip</a></div>
                <div><a onclick="r12CalPosition('out-top');">Move to OUT-TOP</a></div>
                <div><a onclick="r12CalPosition('in-top');">Move to IN-TOP</a></div>
                <div><a onclick="r12CalPosition('in-bottom');">Move to IN-BOTTOM</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=ARM-GRIP&grip=c');">Grip</a></div>
                <div><a onclick="r12CalPosition('out-bottom');">Move to OUT-BOTTOM</a></div>
                <div><a onclick="r12CalAdjust('x', -1);">Adjust X</a></div>
                <div><a onclick="r12CalAdjust('y', -1);">Adjust Y</a></div>
                <div><a onclick="r12CalAdjust('z', -1);">Adjust Z</a></div>
                <div><a onclick="r12CalAdjust('pitch', -1);">Adjust Pitch</a></div>
                <div><a onclick="r12CalAdjust('yaw', -1);">Adjust Yaw</a></div>
                <div><a onclick="r12CalAdjust('roll', -1);">Adjust Roll</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=POSITION-CALIBRATE&option=save');">Persist adjustments</a></div>
            </div>
        </div>
        <div class="section">
            <div class="header">ARM TUNING (in debug only; does not persist adjustment)</div>
            <div class="commands">
                <div><a onclick="r12adjust('x');">Adjust X</a></div>
                <div><a onclick="r12adjust('y');">Adjust Y</a></div>
                <div><a onclick="r12adjust('z');">Adjust Z</a></div>
                <div><a onclick="r12adjust('pitch');">Adjust Pitch</a></div>
                <div><a onclick="r12adjust('yaw');">Adjust Yaw</a></div>
                <div><a onclick="r12adjust('roll');">Adjust Roll</a></div>
                <div><a onclick="r12reload()">Reload positions and routes</a></div>
            </div>
        </div>
        <div class="section">
            <div class="header">ARM MANAGEMENT</div>
            <div class="commands">
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=ARM-CALIBRATE')">Calibrate</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=ARM-HOME')">Home</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=ARM-ENERGIZE');">Energize</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=ARM-DE-ENERGIZE');">De-energize</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=ARM-GRIP&grip=c');">Grip</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=ARM-GRIP&grip=o');">Ungrip</a></div>
                <div><a onclick="r12move();">Move to position</a></div>
            </div>
        </div>
        <div class="section">
            <div class="header">DISC MANAGEMENT</div>
            <div class="commands">
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=EMPTY-DESKTOP&queue=1&desktop=1')">Empty desktop 1</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=EMPTY-DESKTOP&queue=2&desktop=2')">Empty desktop 2</a></div>
                <div><a onclick="r12('INVENTORY')">Inventory</a></div>                
            </div>
        </div>
        <div class="section">
            <div class="header">LAYER MANAGEMENT (desktop 1)</div>
            <div class="commands">
                <div><a onclick="r12mount(1, 10, -1)">Layer 10</a></div>
                <div><a onclick="r12mount(1, 20, -1)">Layer 20</a></div>
                <div><a onclick="r12mount(1, 30, -1)">Layer 30</a></div>
                <div><a onclick="r12mount(1, 11, -1)">Layer 11</a></div>
                <div><a onclick="r12mount(1, 21, -1)">Layer 21</a></div>
                <div><a onclick="r12mount(1, 31, -1)">Layer 31</a></div>
                <div><a onclick="r12mount(1, 22, -1)">Layer 22</a></div>
                <div><a onclick="r12mount(1, 32, -1)">Layer 32</a></div>
                <div><a onclick="r12mount(1, 13, -1)">Layer 13</a></div>
                <div><a onclick="r12mount(1, 23, -1)">Layer 23</a></div>
                <div><a onclick="r12mount(1, 33, -1)">Layer 33</a></div>
                <div><a onclick="r12mount(1, 14, -1)">Layer 14</a></div>
                <div><a onclick="r12mount(1, 24, -1)">Layer 24</a></div>
                <div><a onclick="r12mount(1, 34, -1)">Layer 34</a></div>
            </div>
       </div>
        <div class="section">
            <div class="header">LAYER MANAGEMENT (desktop 2)</div>
            <div class="commands">
                <div><a onclick="r12mount(2, 10, -1)">Layer 10</a></div>
                <div><a onclick="r12mount(2, 20, -1)">Layer 20</a></div>
                <div><a onclick="r12mount(2, 30, -1)">Layer 30</a></div>
                <div><a onclick="r12mount(2, 11, -1)">Layer 11</a></div>
                <div><a onclick="r12mount(2, 21, -1)">Layer 21</a></div>
                <div><a onclick="r12mount(2, 31, -1)">Layer 31</a></div>
                <div><a onclick="r12mount(2, 22, -1)">Layer 22</a></div>
                <div><a onclick="r12mount(2, 32, -1)">Layer 32</a></div>
                <div><a onclick="r12mount(2, 13, -1)">Layer 13</a></div>
                <div><a onclick="r12mount(2, 23, -1)">Layer 23</a></div>
                <div><a onclick="r12mount(2, 33, -1)">Layer 33</a></div>
                <div><a onclick="r12mount(2, 14, -1)">Layer 14</a></div>
                <div><a onclick="r12mount(2, 24, -1)">Layer 24</a></div>
                <div><a onclick="r12mount(2, 34, -1)">Layer 34</a></div>
            </div>
       </div>
       <div class="section">
            <div class="header">SIGN MANAGEMENT</div>
            <div class="commands">
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=00&effect=efficient')">Show sign 00 (efficient)</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=01&effect=efficient')">Show sign 01 (efficient)</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=02&effect=efficient')">Show sign 02 (efficient)</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=03&effect=efficient')">Show sign 03 (efficient)</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=00&effect=continuous')">Show sign 00 (continuous)</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=01&effect=continuous')">Show sign 01 (continuous)</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=02&effect=continuous')">Show sign 02 (continuous)</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=03&effect=continuous')">Show sign 03 (continuous)</a></div>
            </div>
        </div>
       <div class="section">
            <div class="header">SIGN MANAGEMENT</div>
            <div class="commands">
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=00&effect=efficient')">Show sign 00 (efficient)</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=01&effect=efficient')">Show sign 01 (efficient)</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=02&effect=efficient')">Show sign 02 (efficient)</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=03&effect=efficient')">Show sign 03 (efficient)</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=00&effect=continuous')">Show sign 00 (continuous)</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=01&effect=continuous')">Show sign 01 (continuous)</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=02&effect=continuous')">Show sign 02 (continuous)</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-SIGN&queue=0&layer=03&effect=continuous')">Show sign 03 (continuous)</a></div>
            </div>
        </div>
        <div class="section">
            <div class="header">REPAIR DESKTOP</div>
            <div class="commands">
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-LAYER&desktop=1&shelf=5&effect=shake');">Repair desktop 1</a></div>
                <div><a onclick="r12('ENQUEUE?queue=0&status=0&command=SHOW-LAYER&desktop=2&shelf=5&effect=shake');">Repair desktop 2</a></div>
            </div>
        </div>
    </body>
</html>
